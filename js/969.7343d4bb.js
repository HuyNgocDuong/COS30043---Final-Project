"use strict";(self["webpackChunkreal_estate_app"]=self["webpackChunkreal_estate_app"]||[]).push([[969],{2969:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var r=s(6768),o=s(4232);const n={class:"navbar-section"},a={class:"container py-5"},l={key:0,class:"row row-cols-1 row-cols-md-3 g-4"},c={class:"card h-100 shadow-sm d-flex flex-column"},i=["src","alt"],d={class:"card-body d-flex flex-column"},u={class:"card-title"},p={class:"card-text small text-muted"},h={class:"mt-auto text-center d-flex flex-column gap-2"},m=["onClick"],g={key:1,class:"text-center text-muted"},k={class:"footer-section"};function y(e,t,s,y,f,b){const L=(0,r.g2)("NavBar"),v=(0,r.g2)("router-link"),w=(0,r.g2)("SiteFooter");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("section",n,[(0,r.bF)(L)]),(0,r.Lk)("div",a,[t[6]||(t[6]=(0,r.Lk)("h2",{class:"fw-bold mb-4 text-center"},"Manage Property Listings",-1)),t[7]||(t[7]=(0,r.Lk)("div",{class:"text-end mb-4"},[(0,r.Lk)("a",{href:"https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/create_property.php",class:"btn btn-success rounded-pill px-4"}," + Add New Listing ")],-1)),f.houses.length>0?((0,r.uX)(),(0,r.CE)("div",l,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(f.houses,(s=>((0,r.uX)(),(0,r.CE)("div",{class:"col",key:s.id},[(0,r.Lk)("div",c,[(0,r.Lk)("img",{src:`https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/images/${s.image}`,onError:t[0]||(t[0]=(...t)=>e.handleImageError&&e.handleImageError(...t)),class:"card-img-top",alt:s.title,style:{height:"200px","object-fit":"cover"}},null,40,i),(0,r.Lk)("div",d,[(0,r.Lk)("h5",u,(0,o.v_)(s.title),1),(0,r.Lk)("p",p,[t[1]||(t[1]=(0,r.Lk)("strong",null,"Type:",-1)),(0,r.eW)(" "+(0,o.v_)(s.type),1),t[2]||(t[2]=(0,r.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,r.Lk)("strong",null,"Location:",-1)),(0,r.eW)(" "+(0,o.v_)(s.location),1),t[4]||(t[4]=(0,r.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,r.Lk)("strong",null,"Price:",-1)),(0,r.eW)(" $"+(0,o.v_)(s.price.toLocaleString()),1)]),(0,r.Lk)("div",h,[(0,r.bF)(v,{to:{name:"EditProperty",params:{id:s.id}},class:"btn btn-warning btn-sm w-100"},null,8,["to"]),(0,r.Lk)("button",{class:"btn btn-danger btn-sm w-100",onClick:e=>b.deleteProperty(s.id)}," ðŸ—‘ Delete ",8,m)])])])])))),128))])):((0,r.uX)(),(0,r.CE)("div",g," No property listings found. "))]),(0,r.Lk)("section",k,[(0,r.bF)(w)])])}s(8111),s(2489);var f=s(4107),b=s(2512),L={name:"ManageListings",components:{NavBar:f.A,SiteFooter:b.A},data(){return{houses:[]}},mounted(){this.fetchListings()},methods:{fetchListings(){fetch("https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/houses.json?t="+Date.now()).then((e=>e.json())).then((e=>{Array.isArray(e)&&(this.houses=e)})).catch((e=>{console.error("Failed to fetch listings:",e)}))},deleteProperty(e){confirm("Are you sure you want to delete this property?")&&fetch("https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/delete_property.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:e})}).then((async t=>{const s=await t.text();try{const t=JSON.parse(s);console.log("Delete response:",t),t.success?this.houses=this.houses.filter((t=>t.id!==e)):alert("Delete failed: "+(t.error||"Unknown error"))}catch(r){console.error("Failed to parse JSON:",s),alert("Server returned invalid response.")}})).catch((e=>{console.error("Network or server error:",e)}))}}},v=s(1241);const w=(0,v.A)(L,[["render",y],["__scopeId","data-v-551f3bb2"]]);var x=w}}]);
//# sourceMappingURL=969.7343d4bb.js.map