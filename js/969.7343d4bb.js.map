{"version":3,"file":"js/969.7343d4bb.js","mappings":"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","sources":["webpack://real-estate-app/./src/components/ManageListings.vue","webpack://real-estate-app/./src/components/ManageListings.vue?6eb4"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- NAVIGATION BAR -->\r\n    <section class=\"navbar-section\">\r\n      <NavBar />\r\n    </section>\r\n\r\n    <div class=\"container py-5\">\r\n      <h2 class=\"fw-bold mb-4 text-center\">Manage Property Listings</h2>\r\n\r\n      <!-- Add New Button -->\r\n      <div class=\"text-end mb-4\">\r\n        <a\r\n          href=\"https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/create_property.php\"\r\n          class=\"btn btn-success rounded-pill px-4\"\r\n        >\r\n          + Add New Listing\r\n        </a>\r\n      </div>\r\n\r\n      <!-- Listings -->\r\n      <div v-if=\"houses.length > 0\" class=\"row row-cols-1 row-cols-md-3 g-4\">\r\n        <div class=\"col\" v-for=\"house in houses\" :key=\"house.id\">\r\n          <div class=\"card h-100 shadow-sm d-flex flex-column\">\r\n            <!-- Image -->\r\n            <img\r\n              :src=\"`https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/images/${house.image}`\"\r\n              @error=\"handleImageError\"\r\n              class=\"card-img-top\"\r\n              :alt=\"house.title\"\r\n              style=\"height: 200px; object-fit: cover;\"\r\n            />\r\n\r\n            <!-- Info -->\r\n            <div class=\"card-body d-flex flex-column\">\r\n              <h5 class=\"card-title\">{{ house.title }}</h5>\r\n              <p class=\"card-text small text-muted\">\r\n                <strong>Type:</strong> {{ house.type }}<br />\r\n                <strong>Location:</strong> {{ house.location }}<br />\r\n                <strong>Price:</strong> ${{ house.price.toLocaleString() }}\r\n              </p>\r\n\r\n              <!-- Buttons -->\r\n              <div class=\"mt-auto text-center d-flex flex-column gap-2\">\r\n                <router-link\r\n                  :to=\"{ name: 'EditProperty', params: { id: house.id } }\"\r\n                  class=\"btn btn-warning btn-sm w-100\"\r\n                >\r\n                </router-link>\r\n                <button\r\n                  class=\"btn btn-danger btn-sm w-100\"\r\n                  @click=\"deleteProperty(house.id)\"\r\n                >\r\n                  ðŸ—‘ Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- No Listings Message -->\r\n      <div v-else class=\"text-center text-muted\">\r\n        No property listings found.\r\n      </div>\r\n    </div>\r\n\r\n    <!-- FOOTER SECTION -->\r\n    <section class=\"footer-section\">\r\n      <SiteFooter />\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavBar from '@/components/NavBar.vue';\r\nimport SiteFooter from '@/components/SiteFooter.vue';\r\n\r\nexport default {\r\n  name: 'ManageListings',\r\n  components: {\r\n    NavBar,\r\n    SiteFooter\r\n  },\r\n  data() {\r\n    return {\r\n      houses: []\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchListings();\r\n  },\r\n  methods: {\r\n    fetchListings() {\r\n      fetch('https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/houses.json?t=' + Date.now())\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          if (Array.isArray(data)) {\r\n            this.houses = data;\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.error('Failed to fetch listings:', err);\r\n        });\r\n    },\r\n    deleteProperty(id) {\r\n  if (!confirm(\"Are you sure you want to delete this property?\")) return;\r\n\r\n  fetch('https://mercury.swin.edu.au/cos30043/s104471956/FinalProject/php/delete_property.php', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({\r\n      action: 'delete',\r\n      id: id\r\n    })\r\n  })\r\n  .then(async res => {\r\n    const text = await res.text();\r\n    try {\r\n      const result = JSON.parse(text);\r\n      console.log('Delete response:', result);\r\n      if (result.success) {\r\n        this.houses = this.houses.filter(h => h.id !== id);\r\n      } else {\r\n        alert('Delete failed: ' + (result.error || 'Unknown error'));\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to parse JSON:\", text);\r\n      alert(\"Server returned invalid response.\");\r\n    }\r\n  })\r\n  .catch(err => {\r\n    console.error(\"Network or server error:\", err);\r\n  });\r\n}\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card-title {\r\n  font-weight: bold;\r\n}\r\n</style>\r\n","import { render } from \"./ManageListings.vue?vue&type=template&id=551f3bb2&scoped=true\"\nimport script from \"./ManageListings.vue?vue&type=script&lang=js\"\nexport * from \"./ManageListings.vue?vue&type=script&lang=js\"\n\nimport \"./ManageListings.vue?vue&type=style&index=0&id=551f3bb2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-551f3bb2\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_createElementVNode","_hoisted_1","_createVNode","_component_NavBar","_hoisted_2","href","$data","houses","length","_hoisted_3","_Fragment","_renderList","house","id","_hoisted_4","src","image","onError","_cache","args","_ctx","handleImageError","alt","title","style","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_createTextVNode","type","location","price","toLocaleString","_hoisted_9","_component_router_link","to","name","params","onClick","$event","$options","deleteProperty","_hoisted_10","_hoisted_11","_hoisted_12","_component_SiteFooter","components","NavBar","SiteFooter","data","mounted","this","fetchListings","methods","fetch","Date","now","then","res","json","Array","isArray","catch","err","console","error","confirm","method","headers","body","JSON","stringify","action","async","text","result","parse","log","success","filter","h","alert","__exports__","render"],"sourceRoot":""}